function changeCountProduct(t,e){$.post("/products/change-count-products",{id:t,count:e},function(t){})}function totalSum(){var t=0;$.each($(".sum-price"),function(e,i){t+=+$(i).text()}),$(".total-price").text(t)}function deleteProduct(t){$.post("/products/remove-product-to-cart",{id:t},function(e){"ok"==e.status&&(e.data>0?($(".shopping-cart-badge").removeClass("hidden"),$(".shopping-cart-badge").text(e.data)):($(".shopping-cart-badge").addClass("hidden"),$(".shopping-cart-badge").text("")),$("#bonds-"+t).next("hr").remove(),$("#bonds-"+t).remove())})}!function(t,e){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(t.Mustache={},e(t.Mustache))}(this,function(t){function e(t){return"function"==typeof t}function i(t){return m(t)?"array":typeof t}function s(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(t,e){return null!=t&&"object"==typeof t&&e in t}function n(t,e){return g.call(t,e)}function r(t){return!n(x,t)}function a(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return v[t]})}function h(e,i){function o(){if(x&&!v)for(;g.length;)delete f[g.pop()];else g=[];x=!1,v=!1}function n(t){if("string"==typeof t&&(t=t.split(b,2)),!m(t)||2!==t.length)throw new Error("Invalid tags: "+t);a=new RegExp(s(t[0])+"\\s*"),h=new RegExp("\\s*"+s(t[1])),u=new RegExp("\\s*"+s("}"+t[1]))}if(!e)return[];var a,h,u,d=[],f=[],g=[],x=!1,v=!1;n(i||t.tags);for(var T,C,S,H,W,F,A=new c(e);!A.eos();){if(T=A.pos,S=A.scanUntil(a))for(var R=0,L=S.length;R<L;++R)H=S.charAt(R),r(H)?g.push(f.length):v=!0,f.push(["text",H,T,T+1]),T+=1,"\n"===H&&o();if(!A.scan(a))break;if(x=!0,C=A.scan(k)||"name",A.scan($),"="===C?(S=A.scanUntil(w),A.scan(w),A.scanUntil(h)):"{"===C?(S=A.scanUntil(u),A.scan(y),A.scanUntil(h),C="&"):S=A.scanUntil(h),!A.scan(h))throw new Error("Unclosed tag at "+A.pos);if(W=[C,S,T,A.pos],f.push(W),"#"===C||"^"===C)d.push(W);else if("/"===C){if(F=d.pop(),!F)throw new Error('Unopened section "'+S+'" at '+T);if(F[1]!==S)throw new Error('Unclosed section "'+F[1]+'" at '+T)}else"name"===C||"{"===C||"&"===C?v=!0:"="===C&&n(S)}if(F=d.pop())throw new Error('Unclosed section "'+F[1]+'" at '+A.pos);return p(l(f))}function l(t){for(var e,i,s=[],o=0,n=t.length;o<n;++o)e=t[o],e&&("text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(s.push(e),i=e));return s}function p(t){for(var e,i,s=[],o=s,n=[],r=0,a=t.length;r<a;++r)switch(e=t[r],e[0]){case"#":case"^":o.push(e),n.push(e),o=e[4]=[];break;case"/":i=n.pop(),i[5]=e[2],o=n.length>0?n[n.length-1][4]:s;break;default:o.push(e)}return s}function c(t){this.string=t,this.tail=t,this.pos=0}function u(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function d(){this.cache={}}var f=Object.prototype.toString,m=Array.isArray||function(t){return"[object Array]"===f.call(t)},g=RegExp.prototype.test,x=/\S/,v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},$=/\s*/,b=/\s+/,w=/\s*=/,y=/\s*\}/,k=/#|\^|\/|>|\{|&|=|!/;c.prototype.eos=function(){return""===this.tail},c.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var i=e[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},c.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=e.length,e},u.prototype.push=function(t){return new u(t,this)},u.prototype.lookup=function(t){var i,s=this.cache;if(s.hasOwnProperty(t))i=s[t];else{for(var n,r,a=this,h=!1;a;){if(t.indexOf(".")>0)for(i=a.view,n=t.split("."),r=0;null!=i&&r<n.length;)r===n.length-1&&(h=o(i,n[r])),i=i[n[r++]];else i=a.view[t],h=o(a.view,t);if(h)break;a=a.parent}s[t]=i}return e(i)&&(i=i.call(this.view)),i},d.prototype.clearCache=function(){this.cache={}},d.prototype.parse=function(t,e){var i=this.cache,s=i[t];return null==s&&(s=i[t]=h(t,e)),s},d.prototype.render=function(t,e,i){var s=this.parse(t),o=e instanceof u?e:new u(e);return this.renderTokens(s,o,i,t)},d.prototype.renderTokens=function(t,e,i,s){for(var o,n,r,a="",h=0,l=t.length;h<l;++h)r=void 0,o=t[h],n=o[0],"#"===n?r=this.renderSection(o,e,i,s):"^"===n?r=this.renderInverted(o,e,i,s):">"===n?r=this.renderPartial(o,e,i,s):"&"===n?r=this.unescapedValue(o,e):"name"===n?r=this.escapedValue(o,e):"text"===n&&(r=this.rawValue(o)),void 0!==r&&(a+=r);return a},d.prototype.renderSection=function(t,i,s,o){function n(t){return r.render(t,i,s)}var r=this,a="",h=i.lookup(t[1]);if(h){if(m(h))for(var l=0,p=h.length;l<p;++l)a+=this.renderTokens(t[4],i.push(h[l]),s,o);else if("object"==typeof h||"string"==typeof h||"number"==typeof h)a+=this.renderTokens(t[4],i.push(h),s,o);else if(e(h)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");h=h.call(i.view,o.slice(t[3],t[5]),n),null!=h&&(a+=h)}else a+=this.renderTokens(t[4],i,s,o);return a}},d.prototype.renderInverted=function(t,e,i,s){var o=e.lookup(t[1]);if(!o||m(o)&&0===o.length)return this.renderTokens(t[4],e,i,s)},d.prototype.renderPartial=function(t,i,s){if(s){var o=e(s)?s(t[1]):s[t[1]];return null!=o?this.renderTokens(this.parse(o),i,s,o):void 0}},d.prototype.unescapedValue=function(t,e){var i=e.lookup(t[1]);if(null!=i)return i},d.prototype.escapedValue=function(e,i){var s=i.lookup(e[1]);if(null!=s)return t.escape(s)},d.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.2.1",t.tags=["{{","}}"];var T=new d;t.clearCache=function(){return T.clearCache()},t.parse=function(t,e){return T.parse(t,e)},t.render=function(t,e,s){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+i(t)+'" was given as the first argument for mustache#render(template, view, partials)');return T.render(t,e,s)},t.to_html=function(i,s,o,n){var r=t.render(i,s,o);return e(n)?void n(r):r},t.escape=a,t.Scanner=c,t.Context=u,t.Writer=d}),function(t,e,i,s){function o(e,i){var n=this;"object"==typeof i&&(delete i.refresh,delete i.render,t.extend(this,i)),this.$element=t(e),!this.imageSrc&&this.$element.is("img")&&(this.imageSrc=this.$element.attr("src"));var r=(this.position+"").toLowerCase().match(/\S+/g)||[];if(r.length<1&&r.push("center"),1==r.length&&r.push(r[0]),"top"!=r[0]&&"bottom"!=r[0]&&"left"!=r[1]&&"right"!=r[1]||(r=[r[1],r[0]]),this.positionX!=s&&(r[0]=this.positionX.toLowerCase()),this.positionY!=s&&(r[1]=this.positionY.toLowerCase()),n.positionX=r[0],n.positionY=r[1],"left"!=this.positionX&&"right"!=this.positionX&&(isNaN(parseInt(this.positionX))?this.positionX="center":this.positionX=parseInt(this.positionX)),"top"!=this.positionY&&"bottom"!=this.positionY&&(isNaN(parseInt(this.positionY))?this.positionY="center":this.positionY=parseInt(this.positionY)),this.position=this.positionX+(isNaN(this.positionX)?"":"px")+" "+this.positionY+(isNaN(this.positionY)?"":"px"),navigator.userAgent.match(/(iPod|iPhone|iPad)/))return this.imageSrc&&this.iosFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this;if(navigator.userAgent.match(/(Android)/))return this.imageSrc&&this.androidFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this;this.$mirror=t("<div />").prependTo("body");var a=this.$element.find(">.parallax-slider"),h=!1;0==a.length?this.$slider=t("<img />").prependTo(this.$mirror):(this.$slider=a.prependTo(this.$mirror),h=!0),this.$mirror.addClass("parallax-mirror").css({visibility:"hidden",zIndex:this.zIndex,position:"fixed",top:0,left:0,overflow:"hidden"}),this.$slider.addClass("parallax-slider").one("load",function(){n.naturalHeight&&n.naturalWidth||(n.naturalHeight=this.naturalHeight||this.height||1,n.naturalWidth=this.naturalWidth||this.width||1),n.aspectRatio=n.naturalWidth/n.naturalHeight,o.isSetup||o.setup(),o.sliders.push(n),o.isFresh=!1,o.requestRender()}),h||(this.$slider[0].src=this.imageSrc),(this.naturalHeight&&this.naturalWidth||this.$slider[0].complete||a.length>0)&&this.$slider.trigger("load")}function n(s){return this.each(function(){var n=t(this),r="object"==typeof s&&s;this==e||this==i||n.is("body")?o.configure(r):n.data("px.parallax")?"object"==typeof s&&t.extend(n.data("px.parallax"),r):(r=t.extend({},n.data(),r),n.data("px.parallax",new o(this,r))),"string"==typeof s&&("destroy"==s?o.destroy(this):o[s]())})}!function(){for(var t=0,i=["ms","moz","webkit","o"],s=0;s<i.length&&!e.requestAnimationFrame;++s)e.requestAnimationFrame=e[i[s]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[s]+"CancelAnimationFrame"]||e[i[s]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(i){var s=(new Date).getTime(),o=Math.max(0,16-(s-t)),n=e.setTimeout(function(){i(s+o)},o);return t=s+o,n}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(t){clearTimeout(t)})}(),t.extend(o.prototype,{speed:.2,bleed:0,zIndex:-100,iosFix:!0,androidFix:!0,position:"center",overScrollFix:!1,refresh:function(){this.boxWidth=this.$element.outerWidth(),this.boxHeight=this.$element.outerHeight()+2*this.bleed,this.boxOffsetTop=this.$element.offset().top-this.bleed,this.boxOffsetLeft=this.$element.offset().left,this.boxOffsetBottom=this.boxOffsetTop+this.boxHeight;var t=o.winHeight,e=o.docHeight,i=Math.min(this.boxOffsetTop,e-t),s=Math.max(this.boxOffsetTop+this.boxHeight-t,0),n=this.boxHeight+(i-s)*(1-this.speed)|0,r=(this.boxOffsetTop-i)*(1-this.speed)|0;if(n*this.aspectRatio>=this.boxWidth){this.imageWidth=n*this.aspectRatio|0,this.imageHeight=n,this.offsetBaseTop=r;var a=this.imageWidth-this.boxWidth;"left"==this.positionX?this.offsetLeft=0:"right"==this.positionX?this.offsetLeft=-a:isNaN(this.positionX)?this.offsetLeft=-a/2|0:this.offsetLeft=Math.max(this.positionX,-a)}else{this.imageWidth=this.boxWidth,this.imageHeight=this.boxWidth/this.aspectRatio|0,this.offsetLeft=0;var a=this.imageHeight-n;"top"==this.positionY?this.offsetBaseTop=r:"bottom"==this.positionY?this.offsetBaseTop=r-a:isNaN(this.positionY)?this.offsetBaseTop=r-a/2|0:this.offsetBaseTop=r+Math.max(this.positionY,-a)}},render:function(){var t=o.scrollTop,e=o.scrollLeft,i=this.overScrollFix?o.overScroll:0,s=t+o.winHeight;this.boxOffsetBottom>t&&this.boxOffsetTop<=s?(this.visibility="visible",this.mirrorTop=this.boxOffsetTop-t,this.mirrorLeft=this.boxOffsetLeft-e,this.offsetTop=this.offsetBaseTop-this.mirrorTop*(1-this.speed)):this.visibility="hidden",this.$mirror.css({transform:"translate3d(0px, 0px, 0px)",visibility:this.visibility,top:this.mirrorTop-i,left:this.mirrorLeft,height:this.boxHeight,width:this.boxWidth}),this.$slider.css({transform:"translate3d(0px, 0px, 0px)",position:"absolute",top:this.offsetTop,left:this.offsetLeft,height:this.imageHeight,width:this.imageWidth,maxWidth:"none"})}}),t.extend(o,{scrollTop:0,scrollLeft:0,winHeight:0,winWidth:0,docHeight:1<<30,docWidth:1<<30,sliders:[],isReady:!1,isFresh:!1,isBusy:!1,setup:function(){if(!this.isReady){var s=t(i),n=t(e),r=function(){o.winHeight=n.height(),o.winWidth=n.width(),o.docHeight=s.height(),o.docWidth=s.width()},a=function(){var t=n.scrollTop(),e=o.docHeight-o.winHeight,i=o.docWidth-o.winWidth;o.scrollTop=Math.max(0,Math.min(e,t)),o.scrollLeft=Math.max(0,Math.min(i,n.scrollLeft())),o.overScroll=Math.max(t-e,Math.min(t,0))};n.on("resize.px.parallax load.px.parallax",function(){r(),o.isFresh=!1,o.requestRender()}).on("scroll.px.parallax load.px.parallax",function(){a(),o.requestRender()}),r(),a(),this.isReady=!0}},configure:function(e){"object"==typeof e&&(delete e.refresh,delete e.render,t.extend(this.prototype,e))},refresh:function(){t.each(this.sliders,function(){this.refresh()}),this.isFresh=!0},render:function(){this.isFresh||this.refresh(),t.each(this.sliders,function(){this.render()})},requestRender:function(){var t=this;this.isBusy||(this.isBusy=!0,e.requestAnimationFrame(function(){t.render(),t.isBusy=!1}))},destroy:function(i){var s,n=t(i).data("px.parallax");for(n.$mirror.remove(),s=0;s<this.sliders.length;s+=1)this.sliders[s]==n&&this.sliders.splice(s,1);t(i).data("px.parallax",!1),0===this.sliders.length&&(t(e).off("scroll.px.parallax resize.px.parallax load.px.parallax"),this.isReady=!1,o.isSetup=!1)}});var r=t.fn.parallax;t.fn.parallax=n,t.fn.parallax.Constructor=o,t.fn.parallax.noConflict=function(){return t.fn.parallax=r,this},t(i).on("ready.px.parallax.data-api",function(){t('[data-parallax="scroll"]').parallax()})}(jQuery,window,document),$(document).ready(function(){$("#shopping-cart").on("show.bs.modal",function(t){$.get("/products/get-order-data",function(t){if("ok"==t.status){$(".load-block").addClass("hidden");var e=t.data.length;if(e>0){$(".cart-empty").addClass("hidden"),$(".content-block").removeClass("hidden"),$(".block-total-price").removeClass("hidden"),$("#shopping-cart button[type='submit']").removeClass("hidden"),$(".product-list").empty();var i=$("#shopping-cart-product").html();Mustache.parse(i),$.each(t.data,function(t,e){e.work_price=e.price*e.quantity,e.work_id=t,$(".product-list").append(Mustache.render(i,e)),$(".product-list").append("<hr/>")}),totalSum()}else $(".empty-block").removeClass("hidden")}else"bad"==t.status&&t.auth&&($("#shopping-cart").modal("hide"),$(".not-auth-user").removeClass("hidden"),$(".not-auth-user").html("<p><b>"+t.message+"</p></b>"),$("#login-form").modal("show"))})}),$("[data-target='#login-form']").click(function(t){$(".not-auth-user").addClass("hidden")}),$("body").on("click",".cart-quantity-minus",function(t){var e=$(this).next("input").data("id"),i=+$(this).next("input").val(),s=$(this).next("input").data("price"),o=$(this).next("input").data("bonds");i>1&&($(this).next("input").val(--i),$("#sum-price-"+e).html(s*i),changeCountProduct(o,i)),totalSum()}),$("body").on("click",".cart-quantity-plus",function(t){var e=$(this).prev("input").data("id"),i=+$(this).prev("input").val(),s=$(this).prev("input").data("price"),o=$(this).prev("input").data("bonds");$(this).prev("input").val(++i),$("#sum-price-"+e).html(s*i),changeCountProduct(o,i),totalSum()}),$("body").on("change keyup",".quantity",function(t){var e=$(this).data("bonds");this.value=this.value.replace(/[^0-9]/g,""),(""==this.value||this.value<1)&&(this.value=1),changeCountProduct(e,this.value),totalSum()})}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('input[name="_token"]').val()}}),$(window).scroll(function(){$(this).scrollTop()>10?$(".scroller").fadeIn():$(".scroller").fadeOut()}),$(".scroller").click(function(){return $("body,html").animate({scrollTop:0},400),!1}),$(window).scrollTop()>10&&$(".scroller").fadeIn(),function(t){function e(){var e=t("#top__content").outerHeight(!0),i=t("#w-sticker").outerHeight(!0);t(window).scrollTop()>=e&&t(window).innerWidth()>767?(t("#w-sticker").css("height",i),t("#sticker").addClass("active")):(t("#sticker").removeClass("active"),t("#w-sticker").removeAttr("style"))}t(window).on("scroll",e),t(window).on("resize",e)}(jQuery),$(".show-reset-pass-form").click(function(t){$("#show-login-form").hide(400),$("#show-reset-pass-form").show(400)}),$(".show-login-form").click(function(t){$("#show-reset-pass-form").hide(400),$("#show-login-form").show(400)});